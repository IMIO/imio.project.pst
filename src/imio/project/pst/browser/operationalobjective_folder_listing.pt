<metal:folder_listing define-macro="folder_listing" i18n:domain="imio.project.pst">
    <fieldset id="pst-folder-listing" tal:define="renderedElements python: view.listRenderedContainedElements(portal_types=('pstaction', ))">
        <legend i18n:translate="operational_legend_actions">Actions</legend>
        <table class="listing"
               tal:condition="renderedElements">
            <tr>
                <th class='operational_actions_header_title' i18n:translate="" i18n:domain="plone">Title</th>
                <th class='operational_actions_header_description' i18n:translate="" i18n:domain="plone">Description</th>
                <th class='operational_actions_header_state' i18n:translate="" i18n:domain="plone">State</th>
                <th class='operational_actions_header_planned_end_date' i18n:translate="" i18n:domain="imio.project.core">Planned end date</th>
                <th class='operational_actions_header_progress' i18n:translate="" i18n:domain="imio.project.core">Progress</th>
                <th class='operational_actions_header_health_indicator' i18n:translate="">Health indicator</th>
                <th class='operational_actions_header_manager' i18n:translate="" i18n:domain="imio.project.core">Manager</th>
            </tr>
            <tr tal:repeat="renderedElement renderedElements">
                <tal:defines define="obj python: renderedElement.context;
                                     widgets renderedElement/widgets;">
                <td><a href="#" tal:content="obj/title" tal:attributes="href obj/absolute_url">Object title</a></td>
                <td tal:content="obj/Description">Object description</td>
                <td tal:content="obj/@@plone_context_state/workflow_state" i18n:translate="" i18n:domain="plone">State</td>
                <td tal:content="structure python: widgets.get('planned_end_date').render()">Planned end date</td>
                <td><span class="widget-progress-percent">%</span><span tal:replace="structure python: widgets.get('progress').render()">Progress indicator</span></td>
                <td tal:content="structure python: widgets.get('health_indicator').render()"
                    tal:attributes="class string:health_indicator_color_${obj/health_indicator}">Health indicator</td>
                <td tal:content="structure python: widgets.get('manager').render()">Manager</td>
                </tal:defines>
            </tr>
        </table>
        <metal:empty metal:define-slot="no_items_in_listing">
            <p class="discreet"
               tal:condition="not: renderedElements"
               i18n:domain="plone"
               i18n:translate="description_no_items_in_folder">
                There are currently no items in this folder.
            </p>
        </metal:empty>
    </fieldset>
</metal:folder_listing>